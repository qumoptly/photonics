<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self'; script-src 'self' 'nonce-X4b+dG+ddizL1+32biF+DA=='; style-src 'self' 'unsafe-inline'; form-action 'self'; base-uri 'self'; frame-src 'self';">
<title>The thin-film software RP Coating - demo file: fitting layer details to a measured reflection spectrum</title>
<link rel="stylesheet" type="text/css" href="./styles.css">
<link rel="shortcut icon" href="./img/favicon.png" type="image/png">
<link rel="canonical" href="https://www.rp-photonics.com/coating_demo_fitting.html">
<link rel="alternate" type="application/rss+xml" title="The Photonics Spotlight" href="https://www.rp-photonics.com/spotlight.rss">
<link rel="alternate" type="application/rss+xml" title="The RP Photonics Software News" href="https://www.rp-photonics.com/software_news.rss">
<link rel="alternate" type="application/rss+xml" title="New encyclopedia articles" href="https://www.rp-photonics.com/new_articles.rss">
<meta name="date" content="2020-05-22">
<meta name="description" content="The layer details of a mirror structure are numerically fitted to a measured reflection spectrum.">
<meta name="copyright" content="2020 RP Photonics Consulting GmbH">
<meta name="author" content="Dr. R&uuml;diger Paschotta">
<meta name="publisher" content="RP Photonics Consulting GmbH">
<meta name="keywords" content="RP Coating, modeling, software, optical multilayer structures, demo files, fitting, layer details">
<script type="text/javascript" src="./jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="./general.js"></script>
<script type="text/javascript" nonce="X4b+dG+ddizL1+32biF+DA==">
page="coating_demo_fitting.html"; cat="S"; shownbanner=""; ref="http://www.rp-photonics.com/coating_demos.html"; shownsponsors = "";
ts = new Date().toJSON().substring(0, 19);
$(document).ready(function($){ $.get("./log.php",{cat:cat,page:page,ref:ref,shownbanner:shownbanner,shownsponsors:shownsponsors,ts:ts}); })
</script>
</head>
<body>
<div id="logohead">
<div class="areadiv"><table id="areatable"><tr><td>
<div class="areadiv"><table class="areasubtable">
<tr><td colspan="2" class="basicarea"><a href="./marketing.html">RP Photonics Marketing</a></td></tr>
<tr><td><a href="./encyclopedia.html">Encyclopedia</a></td>
<td><a href="./buyersguide.html">Buyer's Guide</a></td></tr>
</table></div>
</td>
<td>
<div class="areadiv"><table class="areasubtable">
<tr><td colspan="2" class="basicarea"><a href="./consulting.html">RP Services and Tools</a></td></tr>
<tr><td><a href="./consulting.html">Consulting</a></td>
<td class="selected"><a href="./software.html">Software</a></td></tr>
</table></div>
</td></tr></table></div>
<img src="img/rp_photonics.png" alt="RP Photonics logo" id="rplogo">
<p><span id="title2">Software</span> <span id="slogan">&hellip; powerful tools for your research &amp; development!</span></p>
<div id="other_language"><a href="coating_demo_fitting_d.html">deutsch</a></div>
</div>
<nav id="soft">
<div id="navitems">
<a id="Software_start" href="software.html">Introduction</a>
<a id="Modeling" href="software_modeling.html">Modeling</a>
<a id="software_news" href="software_news.html">Software News</a>
<p>Products:</p>
<a id="Overview" href="software_overview.html">Overview</a>
<a id="rp_fiber_calculator" href="rp_fiber_calculator.html">RP Fiber Calculator</a>
<a id="rp_fiberpower" href="fiberpower.html">RP Fiber Power</a>
<a id="rp_resonator" href="resonator.html">RP Resonator</a>
<a id="rp_propulse" href="propulse.html">RP ProPulse</a>
<a id="rp_coating" href="coating.html" class="sel">RP Coating</a>
<a href="coating_purpose.html" class="sub">Purpose</a>
<a href="coating_model.html" class="sub">Model</a>
<a href="coating_interface.html" class="sub">Interface</a>
<a href="coating_demos.html" class="sub sel">Demos</a>
<a href="coating_versions.html" class="sub">Versions</a>
<a id="rp_q_switch" href="rp_q_switch.html">RP Q-switch</a>
<p>Various aspects:</p>
<a id="script_language" href="software_script_language.html">Script language</a>
<a id="debugger" href="software_debugger.html">Debugger</a>
<a id="custom_forms" href="software_custom_forms.html">Custom forms</a>
<a id="licenses" href="software_licenses.html">Licenses</a>
<a id="documentation" href="software_docu.html">Documentation</a>
<a id="support" href="software_support.html">Support</a>
<a id="distributors" href="software_distributors.html">Distributors</a>
<p>Take action:</p>
<a id="contact" href="software_contact.html">*Get a quotation*</a>
</div>
</nav>
<div id="main"><main>
<p class="breadcrumbs"><a href="software.html">Software</a> &gt; <a href="coating.html">RP Coating</a> &gt; <a href="coating_demos.html">Demo cases</a> &gt; <a href="coating_demo_fitting.html">Fitting</a></p>
<h1>RP Coating &ndash; Advanced Software for<br>Designing Optical Multilayer Structures</h1>
<table class="subnavtable">
<tr>
<td class="sub_nav"><a class="sub_n" href="coating.html">Overview</a></td>
<td class="sub_nav"><a class="sub_n" href="coating_purpose.html">Purpose</a></td>
<td class="sub_nav"><a class="sub_n" href="coating_model.html">Model</a></td>
<td class="sub_nav"><a class="sub_n" href="coating_interface.html">Interface</a></td>
<td class="sub_nav_sel"><a class="sub_n_sel" href="coating_demos.html">Demos</a></td>
<td class="sub_nav"><a class="sub_n" href="coating_versions.html">Versions</a></td>
</tr>
</table>
<h2 class="togglediv">Demo File: Fitting Layer Details to a Measured Reflection Spectrum</h2>
<div>
<p>When a thin-film structure is grown, there are often uncertainties both concerning the layer thickness values and their refractive index.
The latter is influenced by the packing density of the material, which depends on the detailed growth conditions.
A measured reflectivity spectrum can be used to retrieve information on the layer details and thus to calibrate the coating machine.</p>
<p>In this example, we assume that as a test structure, a simple Bragg mirror with 6 layer pairs of HfO<sub>2</sub> / SiO<sub>2</sub> has been grown on a BK7 substrate, nominally with &lambda;/4 layers at 800&nbsp;nm:</p>
<pre class="codedisplay">
d_units: nm
l_units: nm
&nbsp;
N := 6  { number of layer pairs }
&nbsp;
; Initial (nominal) layer parameters:
d_HfO2 := 800 / 4 / n_HfO2_Jerman(800 nm,7)
x_HfO2 := 7
d_SiO2 := 800 / 4 / n_SiO2_Jerman(800 nm,1.8)
x_SiO2 := 1.6
&nbsp;
beam from superstrate
substrate: BK7
for j := 1 to N do
begin
* HfO2_Jerman, x = x_HfO2, d = d_HfO2
* SiO2_Jerman, x = x_SiO2, d = d_SiO2
end
superstrate: air
</pre>
<p>We use refractive index data from M. Jerman et al., Appl. Opt. 44 (15), 3006 (2005), which depend on the packing density in units of g/cm<sup>3</sup>.
(These index data are provided with the software.)
The precise thickness values and packing densities made with the coating machine are not yet known and should be retrieved from the measured reflectivity data.</p>
<p>The reflection spectrum has been measured and stored in a text file named &ldquo;Reflectivity.dat&rdquo;, containing a wavelength and the corresponding reflectivity (in percent) in each line.
We read that file, such that its x/y data points are stored (by default as row 1):</p>
<pre class="codedisplay">
include "Reflectivity.dat"
</pre>
<p>Now we can do the fit.
As the fitting variables, we use the thickness values and packing densities, assuming that these parameters are identical for all layer pairs.</p>
<p>We first need to define a function which sets the coating structure according to these fit parameters.
Then we can call the fit command and subsequently display the obtained fit parameters:</p>
<pre class="codedisplay">
set_layer_params(d_HfO2, x_HfO2, d_SiO2, x_SiO2) := 
  for j := 1 to N do
  begin
    set_d(2 * j - 1, d_HfO2);
    set_d(2 * j    , d_SiO2);
    set_x(2 * j - 1, x_HfO2);
    set_x(2 * j    , x_SiO2);
  end;
&nbsp;
fit 100 * R(x) to row 1
  with (d_HfO2, x_HfO2, d_SiO2, x_SiO2),
  init set_layer_params(d_HfO2, x_HfO2, d_SiO2, x_SiO2)
&nbsp;
show "d_HfO2:  ", d_HfO2:f1:"nm"
show "d_SiO2:  ", d_SiO2:f1:"nm"
show "x_HfO2:  ", x_HfO2:f2:"g / cm^3"
show "x_SiO2:  ", x_SiO2:f2:"g / cm^3"
</pre>
<p>Finally, we display the reflectivity profile:</p>
<pre class="codedisplay">
diagram 1:
&nbsp;
"Reflectivity Profile"
&nbsp;
x: 400, 1200
"wavelength (nm)", @x
y: 0, 100
"reflectivity (%)", @y
frame
hx
hy
&nbsp;
m: points("r")  { show the data points as rectangles }
&nbsp;
f: 100 * R(x), color = red, width = 3
&nbsp;
["d_HfO2:  ", d_HfO2:f1:"nm"], 120, 150
["d_SiO2:  ", d_SiO2:f1:"nm"], 120, 200
["x_HfO2:  ", x_HfO2:f2:"g / cm^3"], 120, 250
["x_SiO2:  ", x_SiO2:f2:"g / cm^3"], 120, 300
</pre>
<figure>
<img src="img/coating_demo_fitting1.png" alt="fitted reflectivity profile of the test structure">
</figure>
<p>For comparison, see the spectrum without fitting:</p>
<figure>
<img src="img/coating_demo_fitting1b.png" alt="reflectivity profile of the test structure without fitting">
</figure>
<p>This example shows that <b>RP Coating</b> makes it quite easy to retrieve layer data from measured spectra.
Its high flexibility would allow various further degrees of sophistication:</p>
<ul>
<li>If the spectrometer delivers the data not as comma-separated values, but in some other (possibly even binary) format, one could also read such files with a little <a href="software_script_language.html">script programming</a>.</li>
<li>One could export obtained fitting data in any format, e.g. for direct control of coating machine or for documentation purposes.</li>
<li>If in-situ reflectivity measurements are made on the heated substrate, one could automatically apply temperature corrections.</li>
<li>One could do such measurements and fitting on a partly grown structure and then start a numerical optimization for the remaining layers to be grown.
Such growth error control can be implemented with a high degree of automation.</li>
</ul>
</div>
<footer id="copyrightbox">
<span style="margin-right:20px;">&copy; RP Photonics Consulting GmbH</span>
<a href="contact.html">contact and legal info</a>, <a href="privacy.html">declaration of data privacy</a>
</footer>
</main></div>
<!--googleon: index-->
<script type="application/ld+json" nonce="X4b+dG+ddizL1+32biF+DA==">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "publisher": {
    "@type": "Organization",
    "name": "RP Photonics",
    "url": "https://www.rp-photonics.com/",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.rp-photonics.com/img/rp_photonics.png"
      }
  },
  "breadcrumb": {
    "@type": "BreadcrumbList",
    "itemListElement": [{
      "@type": "ListItem",
      "position": 1,
      "name": "Software",
      "item": "https://www.rp-photonics.com/software.html"
    },{
      "@type": "ListItem",
      "position": 2,
      "name": "RP Coating",
      "item": "https://www.rp-photonics.com/coating.html"
    },{
      "@type": "ListItem",
      "position": 3,
      "name": "Demo cases",
      "item": "https://www.rp-photonics.com/coating_demos.html"
    },{
      "@type": "ListItem",
      "position": 4,
      "name": "Fitting",
      "item": "https://www.rp-photonics.com/coating_demo_fitting.html"
    }]}
}
</script>
</body>
</html>
